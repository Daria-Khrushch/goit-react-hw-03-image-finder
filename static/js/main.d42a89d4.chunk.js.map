{"version":3,"sources":["components/Modal/Modal.module.css","components/Button/Button.module.css","components/SearchBar/Searchbar.jsx","api/images-api.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/App/App.jsx","index.js","components/SearchBar/Searchbar.module.css","components/ImageGallery/ImageGallery.module.css"],"names":["module","exports","Searchbar","state","searchbar","handleNameChange","event","setState","currentTarget","value","toLowerCase","handleSabmit","preventDefault","trim","props","onNameSabmit","toast","error","className","s","onSubmit","this","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","React","Component","api","fetchCard","name","page","console","log","fetch","then","response","ok","json","Promise","reject","Error","Button","LoadMoreBtn","onClick","modalRoot","document","querySelector","Modal","onEscClick","code","onClose","onBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","src","largeImageURL","alt","ImageGalleryItem","webformatURL","tags","onOpenModal","ImageGalleryItemImage","ImageGallery","cardImage","status","loadMoreBtn","prevState","largeImageUR","onCloseModal","prevProps","prevName","imageName","nextName","cardAPI","total","hits","catch","scrollTo","top","documentElement","scrollHeight","behavior","images","color","height","width","timeout","map","img","id","App","handleFormSubmit","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d42a89d4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__lrSPf\",\"Modal\":\"Modal_Modal__6eBQK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3pxPs\"};","import React from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport s from './Searchbar.module.css';\r\n\r\nclass Searchbar extends React.Component {\r\n  state = {\r\n    searchbar: '',\r\n  };\r\n\r\n  handleNameChange = event => {\r\n    this.setState({ searchbar: event.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSabmit = event => {\r\n    event.preventDefault();\r\n\r\n    if (this.state.searchbar.trim() === '') {\r\n      toast.error('Error! Еnter something');\r\n      return;\r\n    }\r\n    this.props.onNameSabmit(this.state.searchbar);\r\n    this.setState({ searchbar: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form onSubmit={this.handleSabmit} className={s.SearchForm}>\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <span className={s.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.searchbar}\r\n            onChange={this.handleNameChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport { Searchbar };\r\n","const API_KEY = '21917533-94fc46511cdba7fd05c8e408d';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\n\r\nfunction fetchCard(name, page) {\r\n  console.log(name);\r\n  return fetch(\r\n    `${BASE_URL}?q=${name}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n  ).then(response => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n\r\n    return Promise.reject(new Error(`Not found ${name}`));\r\n  });\r\n}\r\n\r\nconst api = { fetchCard };\r\n\r\nexport default api;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Button.module.css';\r\n\r\nfunction Button({ LoadMoreBtn }) {\r\n  return (\r\n    <button type=\"button\" className={s.Button} onClick={LoadMoreBtn}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  LoadMoreBtn: PropTypes.func.isRequired,\r\n};\r\n\r\nexport { Button };\r\n","import React from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends React.Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.onEscClick);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.onEscClick);\r\n  }\r\n\r\n  //-----------------закрыть по ESС---------------------\r\n  onEscClick = event => {\r\n    const ESC_KEY_CODE = 'Escape';\r\n\r\n    if (event.code === ESC_KEY_CODE) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  //-------------закрыть по onBackdropClick(event)----------\r\n  onBackdropClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={s.Overlay} onClick={this.onBackdropClick}>\r\n        <div className={s.Modal}>\r\n          <img src={this.props.largeImageURL} alt={this.props.alt} />\r\n        </div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nexport { Modal };\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from '../ImageGallery/ImageGallery.module.css';\r\n\r\nconst ImageGalleryItem = ({\r\n  webformatURL,\r\n  tags,\r\n  largeImageURL,\r\n  onOpenModal,\r\n}) => {\r\n  return (\r\n    <li\r\n      onClick={() => {\r\n        onOpenModal(largeImageURL, tags);\r\n      }}\r\n    >\r\n      <img src={webformatURL} alt={tags} className={s.ImageGalleryItemImage} />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  webformatURL: PropTypes.string.isRequired,\r\n  tags: PropTypes.string.isRequired,\r\n  largeImageURL: PropTypes.string.isRequired,\r\n  onOpenModal: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport cardAPI from '../../api/images-api';\r\nimport { Button } from '../Button/Button';\r\nimport { Modal } from '../Modal/Modal';\r\n\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\n\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport s from './ImageGallery.module.css';\r\n\r\nclass ImageGallery extends React.Component {\r\n  state = {\r\n    cardImage: [],\r\n    error: null,\r\n    status: 'idle',\r\n    page: 1,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevName = prevProps.imageName;\r\n    const nextName = this.props.imageName;\r\n\r\n    if (prevName !== nextName) {\r\n      this.setState({ status: 'pending', page: 1 });\r\n\r\n      cardAPI\r\n        .fetchCard(nextName, this.state.page)\r\n        .then(cardImage => {\r\n          if (cardImage.total === 0) {\r\n            this.setState({\r\n              error: `Not found ${nextName}`,\r\n              status: 'rejected',\r\n            });\r\n          } else {\r\n            this.setState(prevState => ({\r\n              cardImage: cardImage.hits,\r\n              status: 'resolved',\r\n            }));\r\n          }\r\n        })\r\n        .catch(error => this.setState({ error, status: 'rejected' }));\r\n    }\r\n\r\n    if (this.state.page !== 1) {\r\n      cardAPI\r\n        .fetchCard(this.props.imageName, this.state.page)\r\n        .then(cardImage =>\r\n          this.setState(prevState => ({\r\n            cardImage: [...prevState.cardImage, ...cardImage.hits],\r\n            status: 'resolved',\r\n          })),\r\n        )\r\n        .then(() => {\r\n          window.scrollTo({\r\n            top: document.documentElement.scrollHeight,\r\n            behavior: 'smooth',\r\n          });\r\n        })\r\n        .catch(error => this.setState({ error, status: 'rejected' }));\r\n    }\r\n  }\r\n\r\n  loadMoreBtn = () => {\r\n    this.setState(prevState => ({\r\n      page: prevState.page + 1,\r\n    }));\r\n  };\r\n\r\n  onOpenModal = (largeImageUR, alt) => {\r\n    this.setState({\r\n      largeImageURL: largeImageUR,\r\n      alt: alt,\r\n    });\r\n  };\r\n\r\n  onCloseModal = () => {\r\n    this.setState({\r\n      largeImageURL: '',\r\n      alt: '',\r\n    });\r\n  };\r\n\r\n  render() {\r\n    console.log(this.state.cardImage);\r\n    const { status, largeImageURL } = this.state;\r\n    const images = this.state.cardImage;\r\n\r\n    if (status === 'idle') {\r\n      return <div>No images yet...</div>;\r\n    }\r\n\r\n    if (status === 'pending') {\r\n      return (\r\n        <div>\r\n          <Loader\r\n            type=\"MutatingDots\"\r\n            color=\"#00BFFF\"\r\n            height={80}\r\n            width={80}\r\n            timeout={3000}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (status === 'resolved') {\r\n      return (\r\n        <ul className={s.ImageGallery}>\r\n          {images.map(img => {\r\n            return (\r\n              <ImageGalleryItem\r\n                key={img.id}\r\n                alt={img.tags}\r\n                webformatURL={img.webformatURL}\r\n                largeImageURL={img.largeImageURL}\r\n                onOpenModal={this.onOpenModal}\r\n              />\r\n            );\r\n          })}\r\n\r\n          <Button LoadMoreBtn={this.loadMoreBtn} />\r\n\r\n          {largeImageURL && (\r\n            <Modal\r\n              largeImageURL={largeImageURL}\r\n              alt={this.state.alt}\r\n              onClose={this.onCloseModal}\r\n            />\r\n          )}\r\n        </ul>\r\n      );\r\n    }\r\n\r\n    if (status === 'rejected') {\r\n      return <h1>Oops! Try again.</h1>;\r\n    }\r\n  }\r\n}\r\n\r\nexport { ImageGallery };\r\n","import React from 'react';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Searchbar } from '../SearchBar/Searchbar';\r\nimport { ImageGallery } from '../ImageGallery/ImageGallery';\r\n\r\nclass App extends React.Component {\r\n  state = {\r\n    imageName: '',\r\n    searchbar: '',\r\n  };\r\n\r\n  handleFormSubmit = imageName => {\r\n    this.setState({ imageName });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Searchbar onNameSabmit={this.handleFormSubmit} />\r\n\r\n        <ImageGallery imageName={this.state.imageName}></ImageGallery>\r\n\r\n        <ToastContainer autoClose={3000} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\nimport 'modern-normalize/modern-normalize.css';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3CEvA\",\"SearchForm\":\"Searchbar_SearchForm__YGXjy\",\"SearchFormButton\":\"Searchbar_SearchFormButton__1sZKO\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__3enSs\",\"SearchFormInput\":\"Searchbar_SearchFormInput__3gPO6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3LS4a\",\"ImageGalleryItem\":\"ImageGallery_ImageGalleryItem__30Bo1\",\"ImageGalleryItemImage\":\"ImageGallery_ImageGalleryItemImage___ocRW\"};"],"sourceRoot":""}